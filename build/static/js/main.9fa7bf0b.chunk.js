(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},22:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),l=(t(22),t(16)),u=t(2),i=function(e){var n=e.message,t=e.type;if(console.log("m",n),console.log("type",t),null===n)return null;var a="message ".concat(t);return r.a.createElement("div",{className:a},n)},s=function(e){return r.a.createElement("div",null,"Filter shown with ",r.a.createElement("input",{value:e.filter,onChange:e.handle}))},m=function(e){return r.a.createElement("form",{onSubmit:e.submit},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.name,onChange:e.hNaC})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.number,onChange:e.hNuC})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){return r.a.createElement("div",null,r.a.createElement("p",{key:e.i},e.person.name," - ",e.person.number,r.a.createElement("button",{onClick:e.delPerson,value:e.person.id},"delete")))},f=function(e){return r.a.createElement("div",null,e.pTS.map((function(n,t){return r.a.createElement(d,{person:n,key:t,delPerson:e.delPerson})})))},v=t(4),h=t.n(v),p=t(15),b=t(3),g=t.n(b),E="http://localhost:3001/api/persons",w={getAll:function(){return g.a.get(E)},create:function(e){return g.a.post(E,e)},update:function(e,n){return g.a.put("".concat(E,"/").concat(e),n)},deletePerson:function(){var e=Object(p.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",g.a.delete("".concat(E,"/").concat(n)));case 4:e.prev=4,e.t0=e.catch(0),console.log("error",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(n){return e.apply(this,arguments)}}()},O=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),d=Object(u.a)(c,2),v=d[0],h=d[1],p=Object(a.useState)(""),b=Object(u.a)(p,2),g=b[0],E=b[1],O=Object(a.useState)(""),j=Object(u.a)(O,2),P=j[0],y=j[1],S=Object(a.useState)(!0),k=Object(u.a)(S,2),C=k[0],N=k[1],T=Object(a.useState)(null),J=Object(u.a)(T,2),x=J[0],A=J[1],B=Object(a.useState)("error"),D=Object(u.a)(B,2),L=D[0],W=D[1];Object(a.useEffect)((function(){w.getAll().then((function(e){o(e.data)}))}),[]);var F=C?t:t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(P.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(i,{message:x,type:L}),r.a.createElement(s,{filter:P,handle:function(e){console.log("filter",e.target.value),y(e.target.value),""===e.target.value?N(!0):N(!1)}}),r.a.createElement("h2",null,"Add a new Person"),r.a.createElement(m,{submit:function(e){e.preventDefault();var n={name:v,number:g,id:t[t.length-1].id+1},a=t.find((function(e){return e.name===v}));console.log("found",a),a?window.confirm("".concat(a.name," is already added to phonebook, remplace the old number ").concat(a.number," with the new one ").concat(n.number,"?"))&&w.update(a.id,n).then((function(e){console.log("r",e.data);var r=t.map((function(n){return n.id===a.id?Object(l.a)({},n,{number:e.data.number}):n}));console.log("listPersons",r),o(r),A("Person '".concat(n.name,"' was updated in the server")),W("update"),setTimeout((function(){A(null)}),3e3)})).catch((function(e){A("Person '".concat(n.name,"' was already removed from server")),W("error"),setTimeout((function(){A(null)}),3e3)})):(w.create(n).then((function(e){console.log("rPost",JSON.stringify(e,null,4)),o(t.concat(e.data)),A("Person '".concat(n.name,"' save it into the server")),W("create"),setTimeout((function(){A(null)}),3e3)})),h(""),E(""))},name:v,hNaC:function(e){console.log("name",e.target.value),h(e.target.value)},number:g,hNuC:function(e){console.log("number",e.target.value),E(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{pTS:F,delPerson:function(e){console.log("delPerson",e.target.value);var n=e.target.value,a=t.find((function(e){return e.id===n}));console.log("found in",JSON.stringify(a,null,4)),window.confirm("Detele ".concat(a.name))&&w.deletePerson(n).then((function(e){console.log("delPerson result then",JSON.stringify(e,null,4));var r=t.filter((function(e){return e.id!==n}));o(r),A("Person '".concat(a.name,"' was removed from server")),W("error"),setTimeout((function(){A(null)}),3e3)}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.9fa7bf0b.chunk.js.map